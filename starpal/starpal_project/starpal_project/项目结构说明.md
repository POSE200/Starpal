# 项目结构与模块功能说明

本项目采用前后端分离架构，后端基于 Python Flask，前端为静态 HTML+JS。目录结构及各模块功能如下：

## 目录结构

```
starpal_project/
├── app.py                  # 后端主程序入口
├── requirements.txt        # Python依赖包列表
├── backend/                # 后端核心代码
│   ├── config/             # 配置模块
│   │   └── config.py       # 配置文件
│   ├── models/             # 数据模型
│   │   └── user.py         # 用户数据模型
│   ├── routes/             # 路由（接口）模块
│   │   ├── auth.py         # 认证相关接口（注册、登录等）
│   │   └── chat.py         # 聊天相关接口（AI对话、清除记忆等）
│   └── services/           # 业务逻辑与服务
│       ├── ai_service.py   # AI对话服务逻辑
│       └── validation.py   # 数据校验逻辑
├── static/                 # 前端静态资源
│   ├── chat.html           # 聊天主页面
│   ├── login.html          # 登录页面
│   ├── assets/             # 样式文件
│   │   ├── starpal-chat-style.css
│   │   └── starpal-style.css
│   └── js/                 # 前端JS模块
│       ├── api.js          # 与后端API交互
│       ├── auth.js         # 登录注册逻辑
│       ├── chat.js         # 聊天主逻辑（流式渲染等）
│       ├── renderer.js     # 消息渲染与代码高亮
│       ├── storage.js      # 本地存储管理
│       ├── utils.js        # 工具函数
```

## 各模块功能说明

### 后端（backend/）

- **config/**：存放全局配置，如数据库、密钥等。
- **models/**：定义数据模型（如用户 User），负责与数据库交互。
- **routes/**：定义 API 接口：
  - `auth.py`：用户注册、登录等认证接口。
  - `chat.py`：AI 聊天、清除记忆等聊天相关接口。
- **services/**：封装业务逻辑：
  - `ai_service.py`：AI 对话核心逻辑。
  - `validation.py`：请求参数校验、邮箱/密码格式校验等。

### 前端（static/）

- **chat.html**：聊天主页面，集成消息流式渲染与代码高亮。
- **login.html**：用户登录页面。
- **assets/**：存放 CSS 样式文件。
- **js/**：前端功能模块：
  - `api.js`：封装与后端 API 的请求。
  - `auth.js`：处理登录、注册等用户认证逻辑。
  - `chat.js`：聊天主逻辑，处理消息流、事件绑定、流式渲染等。
  - `renderer.js`：负责消息的 Markdown 解析与代码高亮。
  - `storage.js`：本地聊天记录、用户信息等的存储管理。
  - `utils.js`：通用工具函数。

---

如需详细接口文档或模块扩展说明，请补充需求。
